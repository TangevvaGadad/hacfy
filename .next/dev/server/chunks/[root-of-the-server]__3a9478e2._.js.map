{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Tangevva/Desktop/hac-fy-vapt-landing-page/proxy.ts"],"sourcesContent":["import type { NextRequest } from \"next/server\"\nimport { NextResponse } from \"next/server\"\n\n// Rate limiting store (in production, use Redis)\nconst requestCounts = new Map<string, { count: number; timestamp: number }>()\n\n// Security proxy (replaces deprecated middleware)\nexport function proxy(request: NextRequest) {\n  const ip = request.headers.get(\"x-forwarded-for\") || request.headers.get(\"x-real-ip\") || \"unknown\"\n\n  const now = Date.now()\n  const record = requestCounts.get(ip)\n\n  if (record) {\n    // Reset counter after 1 minute\n    if (now - record.timestamp > 60000) {\n      requestCounts.set(ip, { count: 1, timestamp: now })\n    } else {\n      record.count++\n      // Block if more than 100 requests per minute\n      if (record.count > 100) {\n        return new NextResponse(\"Too many requests\", { status: 429 })\n      }\n    }\n  } else {\n    requestCounts.set(ip, { count: 1, timestamp: now })\n  }\n\n  const response = NextResponse.next()\n\n  // Remove server identification\n  response.headers.delete(\"x-powered-by\")\n  response.headers.set(\"X-Powered-By\", \"HacFy Security\")\n\n  // Add CORS headers\n  response.headers.set(\"Access-Control-Allow-Credentials\", \"true\")\n  response.headers.set(\"Access-Control-Allow-Origin\", process.env.NEXT_PUBLIC_APP_URL || \"*\")\n  response.headers.set(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\")\n  response.headers.set(\n    \"Access-Control-Allow-Headers\",\n    \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version\",\n  )\n\n  return response\n}\n\nexport const config = {\n  matcher: [\n    // Match all request paths except for the ones starting with:\n    \"/((?!api|_next/static|_next/image|favicon.ico|public).*)\",\n  ],\n}\n"],"names":[],"mappings":";;;;;;AACA;;AAEA,iDAAiD;AACjD,MAAM,gBAAgB,IAAI;AAGnB,SAAS,MAAM,OAAoB;IACxC,MAAM,KAAK,QAAQ,OAAO,CAAC,GAAG,CAAC,sBAAsB,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAEzF,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,SAAS,cAAc,GAAG,CAAC;IAEjC,IAAI,QAAQ;QACV,+BAA+B;QAC/B,IAAI,MAAM,OAAO,SAAS,GAAG,OAAO;YAClC,cAAc,GAAG,CAAC,IAAI;gBAAE,OAAO;gBAAG,WAAW;YAAI;QACnD,OAAO;YACL,OAAO,KAAK;YACZ,6CAA6C;YAC7C,IAAI,OAAO,KAAK,GAAG,KAAK;gBACtB,OAAO,IAAI,8IAAY,CAAC,qBAAqB;oBAAE,QAAQ;gBAAI;YAC7D;QACF;IACF,OAAO;QACL,cAAc,GAAG,CAAC,IAAI;YAAE,OAAO;YAAG,WAAW;QAAI;IACnD;IAEA,MAAM,WAAW,8IAAY,CAAC,IAAI;IAElC,+BAA+B;IAC/B,SAAS,OAAO,CAAC,MAAM,CAAC;IACxB,SAAS,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAErC,mBAAmB;IACnB,SAAS,OAAO,CAAC,GAAG,CAAC,oCAAoC;IACzD,SAAS,OAAO,CAAC,GAAG,CAAC,+BAA+B,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IACvF,SAAS,OAAO,CAAC,GAAG,CAAC,gCAAgC;IACrD,SAAS,OAAO,CAAC,GAAG,CAClB,gCACA;IAGF,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,6DAA6D;QAC7D;KACD;AACH"}}]
}